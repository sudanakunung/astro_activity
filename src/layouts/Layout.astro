<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <!-- Splide CSS dari CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/css/splide.min.css"
    />
    <link rel="stylesheet" href="/slick-1.8.1/slick/slick.css" />
    <link rel="stylesheet" href="/source/jsCalendar.min.css" />
    <script src="//unpkg.com/alpinejs" defer></script>
    <title>Astro Basics</title>
  </head>
  <body>
    <header
      id="navbar"
      class="sticky top-0 w-full z-50 transition-all duration-300 bg-white text-black overflow-visible"
    >
      <!-- Top Section: Language Selector & Logo -->
      <div class="flex items-center px-6 py-1 justify-between w-full relative">
        <!-- Language Dropdown (hidden on mobile, shown on md+) -->
        <label for="languageSelect" class="sr-only">Language Selection</label>
        <div class="hidden md:block">
          <select
            id="languageSelect"
            class="bg-transparent text-white focus:outline-none text-lg"
          >
            <option value="en" class="text-black">English</option>
            <option value="ko" class="text-black">한국어</option>
            <option value="zh" class="text-black">中文</option>
          </select>
        </div>
        <!-- Logo: centered using flex grow -->
        <div class="flex-1 flex justify-center"></div>
        <!-- Member Button (hidden on mobile, shown on md+) -->
        <div class="hidden md:flex items-center justify-end w-32"></div>
      </div>

      <!-- Bottom Section: Main Navigation & Reserve Button -->
      <div
        class="flex justify-between items-center px-6 py-3 border-b border-white/50"
      >
        <!-- Hamburger for Mobile -->
        <button id="hamburger" aria-label="Open Mobile Menu">
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>

        <!-- Desktop Navigation Menu -->
        <nav
          class="hidden xl:flex md:space-x-6 xl:space-x-8 text-base font-normal w-full justify-center overflow-visible relative"
        >
          <a href={`/en/offers`} class="uppercase">Offers</a>
          <a href={`/en/villas`} class="uppercase">Our Villas</a>
          <a href={`/en/spa-wellness`} class="uppercase">Spa & Wellness</a>
          <!-- Dining Dropdown Trigger -->
          <div id="dining-trigger" class="relative group">
            <a href={`/en/dining`} class="inline-block px-2 uppercase">Dining</a
            >
          </div>
          <a href={`/en/experiences`} class="uppercase">Unique Experiences</a>
          <a href={`/en/wedding-events`} class="uppercase">Wedding & Events</a>
          <a href={`/en/our-story`} class="uppercase">Our Story</a>
          <!-- More Dropdown Trigger -->
          <!-- <div id="more-trigger" class="relative group">
      <a href="#" class="inline-block px-2 uppercase">More</a>
      </div> -->
        </nav>

        <a href={`/cart`} class="cart " aria-label="Member Area">
          <div class="relative">
            <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-6"
          >
            <path
              d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"
            ></path>
          </svg>
           <div class="h-6 w-6 rounded-full bg-red-500 absolute -top-3 -right-3 flex items-center justify-center text-white font-semibold text-sm">
          3
        </div>
          </div>
          
        </a>
       
      </div>

      <!-- Off-Canvas Mobile Menu -->
      <div
        id="offcanvas"
        class="fixed top-0 left-0 h-full w-64 bg-white text-black shadow-lg transform -translate-x-full transition-transform duration-300 z-40 flex flex-col"
      >
        <!-- Offcanvas Top: Language Selector (mobile only) -->
        <label for="languageSelectOffcanvas" class="sr-only"
          >Language Selection offcanvas</label
        >
        <div class="relative flex justify-end p-4 border-b border-gray-200">
          <select
            id="languageSelectOffcanvas"
            class="absolute left-4 top-1/2 -translate-y-1/2 md:hidden block bg-transparent text-black focus:outline-none text-sm"
          >
            <option value="en" class="text-black">English</option>
            <option value="ko" class="text-black">한국어</option>
            <option value="zh" class="text-black">中文</option>
          </select>
          <button id="closeOffcanvas" aria-label="Close menu" class="ml-2">
            <svg
              class="w-6 h-6 text-black hover:scale-110 transition-transform duration-200"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <!-- Offcanvas Navigation Links -->
        <nav
          class="flex-1 px-6 pb-6 mt-6 space-y-4 overflow-y-auto font-normal"
        >
          <a href={`/en/offers`} class="block text-xl">Offers</a>
          <a href={`/en/villas`} class="block text-xl">Our Villas</a>
          <a href={`/en/spa-wellness`} class="block text-xl">Spa & Wellness</a>
          <!-- Dining Dropdown (Mobile) -->
          <div>
            <button
              aria-label="Dining Dropdown"
              id="dining-mobile-toggle"
              class="block text-xl w-full text-left flex items-center gap-1 justify-between"
            >
              <span class="flex items-center">
                Dining
                <svg
                  class="w-4 h-4 ml-1 inline-block"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19 9l-7 7-7-7"></path>
                </svg>
              </span>
            </button>
            <div id="dining-mobile-dropdown" class="pl-4 space-y-2 hidden mt-3">
            </div>
          </div>
          <a href={`/en/experiences`} class="block text-xl"
            >Unique Experiences</a
          >
          <a href={`/en/wedding-events`} class="block text-xl"
            >Wedding & Events</a
          >
          <a href={`/en/our-story`} class="block text-xl">Our Story</a>
          <hr class="my-6" />
          <a href={`/en/member`} class="block text-xl">Member</a>
          <!-- More Dropdown (Mobile) -->
          <!-- <div>
        <button aria-label="More Dropdown" id="more-mobile-toggle" class="block text-xl w-full text-left flex items-center gap-1 justify-between">
          <span class="flex items-center">
            More
            <svg class="w-4 h-4 ml-1 inline-block" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </span>
        </button>
        <div id="more-mobile-dropdown" class="pl-4 space-y-2 hidden mt-3">
          <a href="#" class="block text-xl">Member</a>
          <a href="#" class="block text-xl">Contact</a>
        </div>
      </div> -->
        </nav>
      </div>

      <!-- Desktop Dining Dropdown -->
      <div
        id="dining-dropdown"
        class="hidden absolute left-0 right-0 top-[100%] bg-white text-black z-40 shadow-md transition-all duration-200 opacity-0 group-hover:opacity-100"
      >
        <div
          class="max-w-screen-xl mx-auto px-2 flex justify-center space-x-6 py-3 font-normal text-xl"
        >
        </div>
      </div>

      <!-- Desktop More Dropdown -->
      <div
        id="more-dropdown"
        class="hidden absolute left-0 right-0 top-[100%] bg-white text-black z-40 shadow-md transition-all duration-200 opacity-0 group-hover:opacity-100"
      >
        <div
          class="max-w-screen-xl mx-auto px-2 flex justify-center space-x-6 py-3 font-normal text-xl"
        >
          <a href="#" class="hover:underline uppercase text-base">Member</a>
          <a href="#" class="hover:underline uppercase text-base">Contact</a>
        </div>
      </div>
      <script is:inline src="/source/jsCalendar.min.js"></script>
      <script is:inline>
        function updateDropdownPosition(element, dropdown) {
          const navRect = element.getBoundingClientRect();
          dropdown.style.top = navRect.bottom + "px";
        }

        document.addEventListener("DOMContentLoaded", () => {
          const navbar = document.querySelector("#navbar");
          const dropdown = document.querySelector("#dining-dropdown");
          const trigger = document.querySelector("#dining-trigger");
          const moreDropdown = document.querySelector("#more-dropdown");
          const moreTrigger = document.querySelector("#more-trigger");
          const hamburger = document.getElementById("hamburger");
          const offcanvas = document.getElementById("offcanvas");
          const closeBtn = document.getElementById("closeOffcanvas");

          const diningMobileToggle = document.getElementById(
            "dining-mobile-toggle"
          );
          const diningMobileDropdown = document.getElementById(
            "dining-mobile-dropdown"
          );
          const moreMobileToggle =
            document.getElementById("more-mobile-toggle");
          const moreMobileDropdown = document.getElementById(
            "more-mobile-dropdown"
          );

          // Hamburger toggle
          hamburger?.addEventListener("click", () => {
            offcanvas?.classList.toggle("-translate-x-full");
          });
          closeBtn?.addEventListener("click", () => {
            offcanvas?.classList.add("-translate-x-full");
          });

          // Desktop dropdown: Dining
          trigger?.addEventListener("mouseenter", () => {
            if (!dropdown) return;
            updateDropdownPosition(navbar, dropdown);
            dropdown.classList.remove("hidden", "opacity-0");
            dropdown.classList.add("opacity-100", "block");
          });
          trigger?.addEventListener("mouseleave", () => {
            setTimeout(() => {
              if (!dropdown?.matches(":hover")) {
                dropdown.classList.add("opacity-0", "hidden");
                dropdown.classList.remove("opacity-100");
              }
            }, 100);
          });
          dropdown?.addEventListener("mouseenter", () => {
            dropdown.classList.remove("hidden", "opacity-0");
            dropdown.classList.add("opacity-100");
          });
          dropdown?.addEventListener("mouseleave", () => {
            dropdown.classList.add("opacity-0", "hidden");
            dropdown.classList.remove("opacity-100");
          });

          // Desktop dropdown: More
          moreTrigger?.addEventListener("mouseenter", () => {
            if (!moreDropdown) return;
            updateDropdownPosition(navbar, moreDropdown);
            moreDropdown.classList.remove("hidden", "opacity-0");
            moreDropdown.classList.add("opacity-100", "block");
          });
          moreTrigger?.addEventListener("mouseleave", () => {
            setTimeout(() => {
              if (!moreDropdown?.matches(":hover")) {
                moreDropdown.classList.add("opacity-0", "hidden");
                moreDropdown.classList.remove("opacity-100");
              }
            }, 100);
          });
          moreDropdown?.addEventListener("mouseenter", () => {
            moreDropdown.classList.remove("hidden", "opacity-0");
            moreDropdown.classList.add("opacity-100");
          });
          moreDropdown?.addEventListener("mouseleave", () => {
            moreDropdown.classList.add("opacity-0", "hidden");
            moreDropdown.classList.remove("opacity-100");
          });

          // Mobile dropdowns
          diningMobileToggle?.addEventListener("click", (e) => {
            e.stopPropagation();
            diningMobileDropdown?.classList.toggle("hidden");
          });
          moreMobileToggle?.addEventListener("click", (e) => {
            e.stopPropagation();
            moreMobileDropdown?.classList.toggle("hidden");
          });

          // Close offcanvas if a link is clicked (except dropdown toggles)
          const offcanvasItems = offcanvas?.querySelectorAll("a, button") || [];
          offcanvasItems.forEach((item) => {
            item.addEventListener("click", (e) => {
              if (
                e.target.closest("#dining-mobile-toggle") ||
                e.target.closest("#dining-mobile-dropdown") ||
                e.target.closest("#more-mobile-toggle") ||
                e.target.closest("#more-mobile-dropdown")
              )
                return;
              offcanvas.classList.add("-translate-x-full");
            });
          });

          // Language selector syncing
          const selectDesktop = document.getElementById("languageSelect");
          const selectOffcanvas = document.getElementById(
            "languageSelectOffcanvas"
          );
          const currentPath = window.location.pathname;
          const pathParts = currentPath.split("/");
          const currentLang = pathParts[1];
          const lang = ["en", "ko", "zh"].includes(currentLang)
            ? currentLang
            : "en";

          if (selectDesktop) selectDesktop.value = lang;
          if (selectOffcanvas) selectOffcanvas.value = lang;

          const handleLangChange = (selectedLang) => {
            const newPath = currentPath.replace(
              /^\/(en|ko|zh)/,
              `/${selectedLang}`
            );
            const finalPath = ["en", "ko", "zh"].includes(currentLang)
              ? newPath
              : `/${selectedLang}${currentPath}`;
            window.location.href = finalPath;
          };

          selectDesktop?.addEventListener("change", (e) => {
            if (selectOffcanvas) selectOffcanvas.value = e.target.value;
            handleLangChange(e.target.value);
          });

          selectOffcanvas?.addEventListener("change", (e) => {
            if (selectDesktop) selectDesktop.value = e.target.value;
            handleLangChange(e.target.value);
          });
        });

        // Close offcanvas when clicking outside of it
        document.addEventListener("click", (e) => {
          const offcanvas = document.getElementById("offcanvas");
          const hamburger = document.getElementById("hamburger");
          if (!offcanvas || !hamburger) return;
          const isClickInside =
            offcanvas.contains(e.target) || hamburger.contains(e.target);
          if (
            !isClickInside &&
            !offcanvas.classList.contains("-translate-x-full")
          ) {
            offcanvas.classList.add("-translate-x-full");
          }
        });
      </script>
    </header>
    <!-- Floating WhatsApp Button -->
    <a
      href="https://wa.me/62812345678?text=Halo%20saya%20ingin%20informasi%20tiket"
      class="whatsapp-floating"
      target="_blank"
      rel="noopener"
      aria-label="Chat WhatsApp"
    >
      <img src="/whatsapp-3.svg" alt="" />
    </a>

    <main class="container mx-auto py-8 px-4">
      <slot />
    </main>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
    font-family:
      system-ui,
      -apple-system,
      "Segoe UI",
      Roboto,
      "Helvetica Neue",
      Arial;
    color: #111827;
  }

  .site-header {
    border-bottom: 1px solid #e6e6e6;
    background: #fff;
    position: sticky;
    top: 0;
    z-index: 40;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 10px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .brand .logo-link {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
  }

  .logo {
    height: 36px;
    width: auto;
    display: block;
  }
  .logo.small {
    height: 34px;
    opacity: 0.95;
  }

  .actions {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .select-wrap select {
    appearance: none;
    padding: 6px 10px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    background: #fff;
    font-size: 14px;
    color: #111827;
    cursor: pointer;
  }

  /* Floating WhatsApp Button */
  .whatsapp-floating {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;

    color: #fff;
    border-radius: 50%;
    text-decoration: none;
    border: none;

    transition: all 0.3s ease;
    z-index: 50;
  }

  .whatsapp-floating:hover {
    transform: scale(1.1);
  }

  .whatsapp-floating:active {
    transform: scale(0.95);
  }

  .cart {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    border-radius: 6px;
    color: #0f172a;
    text-decoration: none;
    border: 1px solid transparent;
    transition:
      background 0.12s,
      border-color 0.12s;
  }

  .cart:hover {
    background: #f3f4f6;
    border-color: #e5e7eb;
  }

  .sr-only {
    position: absolute !important;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
  }

  @media (max-width: 640px) {
    .container {
      padding: 8px 10px;
    }
    .actions {
      gap: 8px;
    }
    .logo {
      height: 30px;
    }
    .select-wrap select {
      padding: 5px 8px;
      font-size: 13px;
    }

    .whatsapp-floating {
      bottom: 16px;
      right: 16px;
      width: 56px;
      height: 56px;
    }

    .whatsapp-floating svg {
      width: 28px;
      height: 28px;
    }
  }
</style>
